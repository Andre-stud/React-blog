{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const fetchArticles = createAsyncThunk(\"articles/fetchArticles\", async (value, _ref) => {\n  var _JSON$parse;\n  let {\n    rejectWithValue\n  } = _ref;\n  const userAuthorized = localStorage.getItem(\"user\");\n  const token = (_JSON$parse = JSON.parse(userAuthorized)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.user.token;\n  const isToket = token ? {\n    headers: {\n      Authorization: `Token ${token}`\n    }\n  } : null;\n  try {\n    const responseArticles = await fetch(`https://blog.kata.academy/api/articles?limit=5&offset=${value}`, isToket);\n    if (!responseArticles.ok) {\n      throw new Error(\"responseId error\");\n    }\n    const articles = await responseArticles.json();\n    return articles;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const fetchArticle = createAsyncThunk(\"article/fetchArticle\", async (value, _ref2) => {\n  var _JSON$parse2;\n  let {\n    rejectWithValue,\n    dispatch\n  } = _ref2;\n  const userAuthorized = localStorage.getItem(\"user\");\n  const token = (_JSON$parse2 = JSON.parse(userAuthorized)) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.user.token;\n  try {\n    const responseArticle = await fetch(`https://blog.kata.academy/api/articles/${value}`, {\n      headers: {\n        Authorization: `Token ${token}`\n      }\n    });\n    if (!responseArticle.ok) {\n      throw new Error(\"responseId error\");\n    }\n    const article = await responseArticle.json();\n    dispatch(selectArticle(article));\n    return article.article.author.username;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const fetchEditArticle = createAsyncThunk(\"article/fetchEditArticle\", async (_ref3, _ref4) => {\n  let {\n    dataArticle,\n    slug\n  } = _ref3;\n  let {\n    rejectWithValue\n  } = _ref4;\n  const userAuthorized = localStorage.getItem(\"user\");\n  const token = JSON.parse(userAuthorized).user.token;\n  try {\n    const responseArticle = await fetch(`https://blog.kata.academy/api/articles/${slug}`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: `Token ${token}`,\n        \"Content-Type\": \"application/json;charset=utf-8\"\n      },\n      body: JSON.stringify(dataArticle)\n    });\n    if (!responseArticle.ok) {\n      throw new Error(\"responseId error\");\n    }\n    return responseArticle.ok;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const fetchDeliteArticle = createAsyncThunk(\"article/fetchDeliteArticle\", async (value, _ref5) => {\n  let {\n    rejectWithValue\n  } = _ref5;\n  const userAuthorized = localStorage.getItem(\"user\");\n  const token = JSON.parse(userAuthorized).user.token;\n  try {\n    const responseArticle = await fetch(`https://blog.kata.academy/api/articles/${value}`, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Token ${token}`\n      }\n    });\n    if (!responseArticle.ok) {\n      throw new Error(\"responseId error\");\n    }\n    return responseArticle.ok;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const fetchCreateArticle = createAsyncThunk(\"article/fetchCreateArticle\", async (dataArticle, _ref6) => {\n  let {\n    rejectWithValue\n  } = _ref6;\n  const userAuthorized = localStorage.getItem(\"user\");\n  const token = JSON.parse(userAuthorized).user.token;\n  try {\n    const responseArticle = await fetch(`https://blog.kata.academy/api/articles`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Token ${token}`,\n        \"Content-Type\": \"application/json;charset=utf-8\"\n      },\n      body: JSON.stringify(dataArticle)\n    });\n    if (!responseArticle.ok) {\n      throw new Error(\"responseId error\");\n    }\n    return responseArticle.ok;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const fetchLikeArticle = createAsyncThunk(\"article/fetchLikeArticle\", async (_ref7, _ref8) => {\n  let {\n    slug,\n    method\n  } = _ref7;\n  let {\n    rejectWithValue\n  } = _ref8;\n  const userAuthorized = localStorage.getItem(\"user\");\n  const token = JSON.parse(userAuthorized).user.token;\n  try {\n    const responseArticle = await fetch(`https://blog.kata.academy/api/articles/${slug}/favorite`, {\n      method: method,\n      headers: {\n        Authorization: `Token ${token}`\n      }\n    });\n    if (!responseArticle.ok) {\n      throw new Error(\"responseId error\");\n    }\n    return responseArticle.ok;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst articlesSlice = createSlice({\n  name: \"articl\",\n  initialState: {\n    articles: [],\n    article: [],\n    defaultPath: \"/\",\n    status: null,\n    error: null\n  },\n  reducers: {\n    selectArticle(state, actions) {\n      state.article = actions.payload;\n    }\n  },\n  extraReducers: {\n    [fetchArticles.pending]: state => {\n      state.status = \"loading\";\n      state.error = null;\n    },\n    [fetchArticles.fulfilled]: (state, actions) => {\n      state.status = \"resolved\";\n      state.articles = actions.payload;\n    },\n    [fetchArticles.rejected]: (state, actions) => {\n      state.status = \"rejected\";\n      state.error = actions.payload;\n    }\n  }\n});\nexport const {\n  selectArticle\n} = articlesSlice.actions;\nexport default articlesSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchArticles","value","_ref","_JSON$parse","rejectWithValue","userAuthorized","localStorage","getItem","token","JSON","parse","user","isToket","headers","Authorization","responseArticles","fetch","ok","Error","articles","json","error","message","fetchArticle","_ref2","_JSON$parse2","dispatch","responseArticle","article","selectArticle","author","username","fetchEditArticle","_ref3","_ref4","dataArticle","slug","method","body","stringify","fetchDeliteArticle","_ref5","fetchCreateArticle","_ref6","fetchLikeArticle","_ref7","_ref8","articlesSlice","name","initialState","defaultPath","status","reducers","state","actions","payload","extraReducers","pending","fulfilled","rejected","reducer"],"sources":["/Users/andre/Desktop/blog/src/store/articles-slice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nexport const fetchArticles = createAsyncThunk(\n  \"articles/fetchArticles\",\n  async (value, { rejectWithValue }) => {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized)?.user.token;\n    const isToket = token\n      ? {\n          headers: {\n            Authorization: `Token ${token}`,\n          },\n        }\n      : null;\n\n    try {\n      const responseArticles = await fetch(\n        `https://blog.kata.academy/api/articles?limit=5&offset=${value}`,\n        isToket\n      );\n\n      if (!responseArticles.ok) {\n        throw new Error(\"responseId error\");\n      }\n\n      const articles = await responseArticles.json();\n\n      return articles;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchArticle = createAsyncThunk(\n  \"article/fetchArticle\",\n  async (value, { rejectWithValue, dispatch }) => {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized)?.user.token;\n    try {\n      const responseArticle = await fetch(\n        `https://blog.kata.academy/api/articles/${value}`,\n        {\n          headers: {\n            Authorization: `Token ${token}`,\n          },\n        }\n      );\n\n      if (!responseArticle.ok) {\n        throw new Error(\"responseId error\");\n      }\n\n      const article = await responseArticle.json();\n      dispatch(selectArticle(article));\n\n      return article.article.author.username;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchEditArticle = createAsyncThunk(\n  \"article/fetchEditArticle\",\n  async ({ dataArticle, slug }, { rejectWithValue }) => {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized).user.token;\n\n    try {\n      const responseArticle = await fetch(\n        `https://blog.kata.academy/api/articles/${slug}`,\n        {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Token ${token}`,\n\n            \"Content-Type\": \"application/json;charset=utf-8\",\n          },\n          body: JSON.stringify(dataArticle),\n        }\n      );\n\n      if (!responseArticle.ok) {\n        throw new Error(\"responseId error\");\n      }\n\n      return responseArticle.ok;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchDeliteArticle = createAsyncThunk(\n  \"article/fetchDeliteArticle\",\n  async (value, { rejectWithValue }) => {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized).user.token;\n\n    try {\n      const responseArticle = await fetch(\n        `https://blog.kata.academy/api/articles/${value}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            Authorization: `Token ${token}`,\n          },\n        }\n      );\n\n      if (!responseArticle.ok) {\n        throw new Error(\"responseId error\");\n      }\n\n      return responseArticle.ok;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchCreateArticle = createAsyncThunk(\n  \"article/fetchCreateArticle\",\n  async (dataArticle, { rejectWithValue }) => {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized).user.token;\n\n    try {\n      const responseArticle = await fetch(\n        `https://blog.kata.academy/api/articles`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Token ${token}`,\n\n            \"Content-Type\": \"application/json;charset=utf-8\",\n          },\n          body: JSON.stringify(dataArticle),\n        }\n      );\n\n      if (!responseArticle.ok) {\n        throw new Error(\"responseId error\");\n      }\n\n      return responseArticle.ok;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchLikeArticle = createAsyncThunk(\n  \"article/fetchLikeArticle\",\n  async ({ slug, method }, { rejectWithValue }) => {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized).user.token;\n\n    try {\n      const responseArticle = await fetch(\n        `https://blog.kata.academy/api/articles/${slug}/favorite`,\n        {\n          method: method,\n          headers: {\n            Authorization: `Token ${token}`,\n          },\n        }\n      );\n\n      if (!responseArticle.ok) {\n        throw new Error(\"responseId error\");\n      }\n\n      return responseArticle.ok;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst articlesSlice = createSlice({\n  name: \"articl\",\n  initialState: {\n    articles: [],\n    article: [],\n    defaultPath: \"/\",\n    status: null,\n    error: null,\n  },\n  reducers: {\n    selectArticle(state, actions) {\n      state.article = actions.payload;\n    },\n  },\n  extraReducers: {\n    [fetchArticles.pending]: (state) => {\n      state.status = \"loading\";\n      state.error = null;\n    },\n    [fetchArticles.fulfilled]: (state, actions) => {\n      state.status = \"resolved\";\n      state.articles = actions.payload;\n    },\n    [fetchArticles.rejected]: (state, actions) => {\n      state.status = \"rejected\";\n      state.error = actions.payload;\n    },\n  },\n});\n\nexport const { selectArticle } = articlesSlice.actions;\nexport default articlesSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}