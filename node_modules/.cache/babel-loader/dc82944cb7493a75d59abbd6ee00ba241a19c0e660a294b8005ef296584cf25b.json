{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const fetchUser = createAsyncThunk(\"regUser/fetchUser\", async (_ref, _ref2) => {\n  let {\n    userData,\n    path\n  } = _ref;\n  let {\n    rejectWithValue\n  } = _ref2;\n  try {\n    const responseUser = await fetch(`https://blog.kata.academy/api/${path}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json;charset=utf-8\"\n      },\n      body: JSON.stringify(userData)\n    });\n    if (!responseUser.ok) {\n      throw new Error(\"responseUser error\");\n    }\n    const user = await responseUser.json();\n    localStorage.setItem(\"user\", JSON.stringify(user));\n    return user;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nexport const fetchUserPut = createAsyncThunk(\"regUser/fetchUserPut\", async (userData, _ref3) => {\n  let {\n    rejectWithValue\n  } = _ref3;\n  try {\n    const userAuthorized = localStorage.getItem(\"user\");\n    const token = JSON.parse(userAuthorized).user.token;\n    const responseUser = await fetch(`https://blog.kata.academy/api/user`, {\n      method: \"PUT\",\n      headers: {\n        Authorization: `Token ${token}`,\n        \"Content-Type\": \"application/json;charset=utf-8\"\n      },\n      body: JSON.stringify(userData)\n    });\n    if (!responseUser.ok) {\n      throw new Error(\"responseUser error\");\n    }\n    const user = await responseUser.json();\n    localStorage.setItem(\"user\", JSON.stringify(user));\n    return user;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\n\n// export const fetchSignInUser = createAsyncThunk(\n//   \"signInUser/fetchSignInUser\",\n//   async (userData, { rejectWithValue }) => {\n//     try {\n//       const responseUser = await fetch(\n//         `https://blog.kata.academy/api/users/login`,\n//         {\n//           method: \"POST\",\n//           headers: {\n//             \"Content-Type\": \"application/json;charset=utf-8\",\n//           },\n//           body: JSON.stringify(userData),\n//         }\n//       );\n\n//       if (!responseUser.ok) {\n//         throw new Error(\"responseUser error\");\n//       }\n\n//       const user = await responseUser.json();\n//       localStorage.setItem(\"user\", JSON.stringify(user));\n\n//       return user;\n//     } catch (error) {\n//       return rejectWithValue(error.message);\n//     }\n//   }\n// );\n\nconst userSlice = createSlice({\n  name: \"userData\",\n  initialState: {\n    userData: null,\n    status: null,\n    error: null\n  },\n  reducers: {\n    addUserData(state, action) {\n      state.userData = action.payload;\n    }\n  },\n  extraReducers: {\n    [fetchUser.pending]: state => {\n      state.status = \"loading\";\n      state.error = null;\n    },\n    [fetchUser.fulfilled]: (state, actions) => {\n      state.status = \"resolved\";\n      state.userData = actions.payload;\n      // console.log(actions.payload)\n    },\n\n    [fetchUser.rejected]: (state, actions) => {\n      state.status = \"rejected\";\n      state.error = actions.payload;\n    },\n    [fetchUserPut.pending]: state => {\n      state.status = \"loading\";\n      state.error = null;\n    },\n    [fetchUserPut.fulfilled]: (state, actions) => {\n      state.status = \"resolved\";\n      state.userData = actions.payload;\n      // console.log(actions.payload)\n    },\n\n    [fetchUserPut.rejected]: (state, actions) => {\n      state.status = \"rejected\";\n      state.error = actions.payload;\n    }\n  }\n});\nexport const {\n  addUserData\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchUser","_ref","_ref2","userData","path","rejectWithValue","responseUser","fetch","method","headers","body","JSON","stringify","ok","Error","user","json","localStorage","setItem","error","message","fetchUserPut","_ref3","userAuthorized","getItem","token","parse","Authorization","userSlice","name","initialState","status","reducers","addUserData","state","action","payload","extraReducers","pending","fulfilled","actions","rejected","reducer"],"sources":["/Users/andre/Desktop/blog/src/components/store/user-slice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\n\nexport const fetchUser = createAsyncThunk(\n  \"regUser/fetchUser\",\n  async ({userData, path}, { rejectWithValue }) => {\n    try {\n      const responseUser = await fetch(`https://blog.kata.academy/api/${path}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json;charset=utf-8\",\n        },\n        body: JSON.stringify(userData),\n      });\n\n      if (!responseUser.ok) {\n        throw new Error(\"responseUser error\");\n      }\n\n      const user = await responseUser.json();\n      localStorage.setItem(\"user\", JSON.stringify(user));\n\n      return user;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\n\nexport const fetchUserPut = createAsyncThunk(\n  \"regUser/fetchUserPut\",\n  async (userData, { rejectWithValue }) => {\n    try {\n\n      const userAuthorized = localStorage.getItem(\"user\");\n      const token = JSON.parse(userAuthorized).user.token;\n\n      const responseUser = await fetch(`https://blog.kata.academy/api/user`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Token ${token}`,\n\n          \"Content-Type\": \"application/json;charset=utf-8\",\n        },\n        body: JSON.stringify(userData),\n      });\n\n      if (!responseUser.ok) {\n        throw new Error(\"responseUser error\");\n      }\n\n      const user = await responseUser.json();\n      localStorage.setItem(\"user\", JSON.stringify(user));\n\n      return user;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\n// export const fetchSignInUser = createAsyncThunk(\n//   \"signInUser/fetchSignInUser\",\n//   async (userData, { rejectWithValue }) => {\n//     try {\n//       const responseUser = await fetch(\n//         `https://blog.kata.academy/api/users/login`,\n//         {\n//           method: \"POST\",\n//           headers: {\n//             \"Content-Type\": \"application/json;charset=utf-8\",\n//           },\n//           body: JSON.stringify(userData),\n//         }\n//       );\n\n//       if (!responseUser.ok) {\n//         throw new Error(\"responseUser error\");\n//       }\n\n//       const user = await responseUser.json();\n//       localStorage.setItem(\"user\", JSON.stringify(user));\n\n//       return user;\n//     } catch (error) {\n//       return rejectWithValue(error.message);\n//     }\n//   }\n// );\n\nconst userSlice = createSlice({\n  name: \"userData\",\n  initialState: {\n    userData: null,\n    status: null,\n    error: null,\n  },\n  reducers: {\n    addUserData(state, action) {\n      state.userData = action.payload;\n    },\n  },\n  extraReducers: {\n    [fetchUser.pending]: (state) => {\n      state.status = \"loading\";\n      state.error = null;\n    },\n    [fetchUser.fulfilled]: (state, actions) => {\n      state.status = \"resolved\";\n      state.userData = actions.payload;\n      // console.log(actions.payload)\n    },\n    [fetchUser.rejected]: (state, actions) => {\n      state.status = \"rejected\";\n      state.error = actions.payload;\n    },\n      [fetchUserPut.pending]: (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      },\n      [fetchUserPut.fulfilled]: (state, actions) => {\n        state.status = \"resolved\";\n        state.userData = actions.payload;\n        // console.log(actions.payload)\n      },\n      [fetchUserPut.rejected]: (state, actions) => {\n        state.status = \"rejected\";\n        state.error = actions.payload;\n      },\n  },\n});\n\nexport const { addUserData } = userSlice.actions;\nexport default userSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}